const TronWeb = require("tronweb");
const tronWeb = new TronWeb(
  "https://api.shasta.trongrid.io",
  "https://api.shasta.trongrid.io",
  "https://api.shasta.trongrid.io",
  "55913312d852a4d12b437d13815fb19183a39aad95316aaa9f57df73ea67815f"
);

tx = {
  visible: false,
  txID: "ac09cbf5a00d60870d1cee50d646bfb5f758fb039800f519b8ada8bb44999dad",
  contract_address: "419f560df9695e3848d9d682032228b12f57ebd21d",
  raw_data: {
    contract: [
      {
        parameter: {
          value: {
            owner_address: "41188fba19b763682c6f737e2276a49bc604c25930",
            new_contract: {
              bytecode:
                "608060405234801561001057600080fd5b50d3801561001d57600080fd5b50d2801561002a57600080fd5b506040516103a33803806103a3833981016040819052610049916100c7565b61005b816001600160e01b0361006116565b5061012d565b805160005560200151600155565b60006040828403121561008157600080fd5b61008b60406100ed565b9050600061009984846100b6565b82525060206100aa848483016100b6565b60208301525092915050565b80516100c181610116565b92915050565b6000604082840312156100d957600080fd5b60006100e5848461006f565b949350505050565b6040518181016001600160401b038111828210171561010b57600080fd5b604052919050565b90565b61011f81610113565b811461012a57600080fd5b50565b6102678061013c6000396000f3fe608060405234801561001057600080fd5b50d3801561001d57600080fd5b50d2801561002a57600080fd5b506004361061005b5760003560e01c80631fe5d6e3146100605780632b06cb2d1461007f5780632d6d4d8414610094575b600080fd5b6100686100a9565b6040516100769291906101c2565b60405180910390f35b6100876100b2565b60405161007691906101b4565b6100a76100a2366004610155565b6100d5565b005b60005460015482565b6100ba6100e3565b50604080518082019091526000548152600154602082015290565b805160005560200151600155565b604051806040016040528060008152602001600081525090565b60006040828403121561010f57600080fd5b61011960406101e4565b905060006101278484610144565b825250602061013884848301610144565b60208301525092915050565b803561014f8161020e565b92915050565b60006040828403121561016757600080fd5b600061017384846100fd565b949350505050565b8051604083019061018c84826101a5565b50602082015161019f60208501826101a5565b50505050565b6101ae8161020b565b82525050565b6040810161014f828461017b565b604081016101d082856101a5565b6101dd60208301846101a5565b9392505050565b60405181810167ffffffffffffffff8111828210171561020357600080fd5b604052919050565b90565b6102178161020b565b811461022257600080fd5b5056fea36474726f6e5820b160f9fea1ec64717e4eef91253e58012296c6e63d923c82e5fb7fe600265fd66c6578706572696d656e74616cf564736f6c6343000509003f00000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000004",
              name: "Test",
              origin_address: "41188fba19b763682c6f737e2276a49bc604c25930",
              abi: {
                entrys: [
                  {
                    outputs: [
                      { name: "a", type: "uint256" },
                      { name: "b", type: "uint256" },
                    ],
                    constant: true,
                    name: "ab",
                    stateMutability: "View",
                    type: "Function",
                  },
                  {
                    outputs: [{ type: "tuple" }],
                    constant: true,
                    name: "getAB",
                    stateMutability: "View",
                    type: "Function",
                  },
                  {
                    inputs: [{ name: "_ab", type: "tuple" }],
                    name: "setAB",
                    stateMutability: "Nonpayable",
                    type: "Function",
                  },
                  {
                    inputs: [{ name: "_ab", type: "tuple" }],
                    stateMutability: "Nonpayable",
                    type: "Constructor",
                  },
                ],
              },
            },
          },
          type_url: "type.googleapis.com/protocol.CreateSmartContract",
        },
        type: "CreateSmartContract",
      },
    ],
    ref_block_bytes: "9194",
    ref_block_hash: "8023aebbcf9b2490",
    expiration: 1598607720000,
    timestamp: 1598607661394,
  },
  raw_data_hex:
    "0a02919422088023aebbcf9b249040c0fcc7a3c32e5ac809081e12c3090a30747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e437265617465536d617274436f6e7472616374128e090a1541188fba19b763682c6f737e2276a49bc604c2593012f4080a1541188fba19b763682c6f737e2276a49bc604c259301a6f0a2610011a0261622a0c1201611a0775696e743235362a0c1201621a0775696e74323536300240020a1610011a0567657441422a071a057475706c65300240020a191a057365744142220c12035f61621a057475706c65300240030a12220c12035f61621a057475706c653001400322e307608060405234801561001057600080fd5b50d3801561001d57600080fd5b50d2801561002a57600080fd5b506040516103a33803806103a3833981016040819052610049916100c7565b61005b816001600160e01b0361006116565b5061012d565b805160005560200151600155565b60006040828403121561008157600080fd5b61008b60406100ed565b9050600061009984846100b6565b82525060206100aa848483016100b6565b60208301525092915050565b80516100c181610116565b92915050565b6000604082840312156100d957600080fd5b60006100e5848461006f565b949350505050565b6040518181016001600160401b038111828210171561010b57600080fd5b604052919050565b90565b61011f81610113565b811461012a57600080fd5b50565b6102678061013c6000396000f3fe608060405234801561001057600080fd5b50d3801561001d57600080fd5b50d2801561002a57600080fd5b506004361061005b5760003560e01c80631fe5d6e3146100605780632b06cb2d1461007f5780632d6d4d8414610094575b600080fd5b6100686100a9565b6040516100769291906101c2565b60405180910390f35b6100876100b2565b60405161007691906101b4565b6100a76100a2366004610155565b6100d5565b005b60005460015482565b6100ba6100e3565b50604080518082019091526000548152600154602082015290565b805160005560200151600155565b604051806040016040528060008152602001600081525090565b60006040828403121561010f57600080fd5b61011960406101e4565b905060006101278484610144565b825250602061013884848301610144565b60208301525092915050565b803561014f8161020e565b92915050565b60006040828403121561016757600080fd5b600061017384846100fd565b949350505050565b8051604083019061018c84826101a5565b50602082015161019f60208501826101a5565b50505050565b6101ae8161020b565b82525050565b6040810161014f828461017b565b604081016101d082856101a5565b6101dd60208301846101a5565b9392505050565b60405181810167ffffffffffffffff8111828210171561020357600080fd5b604052919050565b90565b6102178161020b565b811461022257600080fd5b5056fea36474726f6e5820b160f9fea1ec64717e4eef91253e58012296c6e63d923c82e5fb7fe600265fd66c6578706572696d656e74616cf564736f6c6343000509003f000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000043a045465737470d2b2c4a3c32e",
};

(async () => {
  const signTx = await tronWeb.trx.sign(
    tx,
    "55913312d852a4d12b437d13815fb19183a39aad95316aaa9f57df73ea67815f",
    true,
    false
  );

  const result = await tronWeb.trx.sendRawTransaction(signTx, {});

  console.log(result);
})();
